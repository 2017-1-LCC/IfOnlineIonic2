<ion-header>
  <ion-navbar>
    <ion-title>Grupo Selecionado</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>

  <ion-grid style="background-color: cornflowerblue; height:25%; color:white">

    <ion-row>
      <ion-col col-3>
          <img src="http://via.placeholder.com/250x250" class="image circle-pic" />
      </ion-col>
      <ion-col>
        <div><p style="color:black;">{{group.discipline}}</p></div> 
        <div>Prof: {{group.admin.name}}</div> 
        <div>E-mail: {{group.admin.user.email}}</div> 
        <div>
          <ion-icon name="people"></ion-icon>
          <span>{{group.students.length}}</span>
          <ion-icon name="heart"></ion-icon> 
          <span>{{group.likers ? group.likers.length : 0}}</span>
        </div> 
      </ion-col>
    </ion-row>
    
  </ion-grid>

  <ion-grid>
    <ion-row>
      <ion-col col-6>
          <button ion-button color="secondary" *ngIf="!isMember && !isTeacher" (click)="addStudent()" >Entrar no grupo</button>
          <button ion-button color="danger" *ngIf="isMember && !isTeacher" (click)="removeStudent()">Sair do grupo</button>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid>
    <ion-list-header class="headerList">
      Objetivo da disciplina
    </ion-list-header>
    <ion-list>
      <ion-item text-wrap>
        <ion-row>
          <ion-col col-12>
            <p>{{group.description}}</p>
          </ion-col>
        </ion-row>
      </ion-item>
    </ion-list>
  </ion-grid>

  <ion-grid *ngIf="group.classSchedule.length">
    <ion-list-header class="headerList">
        Horário das aulas
    </ion-list-header>
    <ion-list>
      <ion-item *ngFor="let classSchedule of group.classSchedule" >
        <ion-row>
          <ion-col col-4>
            <p>{{classSchedule.dayOfWeek}}</p>
          </ion-col>
          <ion-col col-8>
            <p>Inicia ás: {{classSchedule.startTime}}</p>
            <p>Termina ás: {{classSchedule.endTime}}</p>
          </ion-col>
        </ion-row>
      </ion-item>
    </ion-list>
  </ion-grid>

  <ion-grid *ngIf="group.scheduledActivity.length">
    <ion-list-header class="headerList">
      Atividades programadas
    </ion-list-header>
    <ion-list>
      <ion-item *ngFor="let scheduledActivity of group.scheduledActivity" text-wrap>
        <ion-row>
          <b>{{scheduledActivity.description}}</b>
        </ion-row>
        <br/>
        <ion-row>
          <ion-col>
            <p>Data de envio: {{scheduledActivity.sendDate | date:'dd-MM-yyyy'}}</p>
          </ion-col>
        </ion-row> 
        <ion-row>
          <ion-col>
              <p>Data de entrega: {{scheduledActivity.deliveryDate | date:'dd-MM-yyyy'}}</p>
          </ion-col>
        </ion-row>
      </ion-item>
    </ion-list>
  </ion-grid>

    <div>
      <ion-segment [(ngModel)]="classSchedule">
        <ion-segment-button value="comments">
          Comentários
        </ion-segment-button>
        <ion-segment-button value="proof">
          Provas
        </ion-segment-button>
        <ion-segment-button value="students">
          Alunos
        </ion-segment-button>
      </ion-segment>
    </div>
    
    <div [ngSwitch]="classSchedule">
    
      <ion-list *ngSwitchCase="'comments'" >
        <form #newCommentForm="ngForm" *ngIf="isMember || isOwner">
            <ion-item>
              <ion-label floating>Digite seu comentário</ion-label>
              <ion-textarea rows="4" type="text" [(ngModel)]="comment" name="comment" required></ion-textarea>
            </ion-item>
            <button ion-button class="submit-btn" full (click)="sendComment(comment)" [disabled]="!newCommentForm.form.valid">Comentar</button>
        </form>
        <ion-list>
          <ion-item-sliding *ngFor="let comment of group.comments | orderBy:'dateComment'">
            <ion-item text-wrap>
              <ion-avatar item-start>
                <img *ngIf="comment.user.avatar" [src]="comment.user.avatar">
                <img *ngIf="!comment.user.avatar" src="assets/imgs/no_user.png">
              </ion-avatar>
              <h2>{{comment.user.username}} - <i>@{{comment.user.username}}</i></h2>
              <h4>{{comment.dateComment | date:'dd/MM/yy hh:mm'}}</h4>
              <p>{{comment.content}}</p>
            </ion-item>
            <ion-item-options side="right">
            <button ion-button color="danger" *ngIf="comment.user._id === userComment" (click)="removerComment(comment)">
              <ion-icon name="trash"></ion-icon>
              excluir
            </button>
            </ion-item-options>
          </ion-item-sliding>
        </ion-list>
      </ion-list>

      <ion-list *ngSwitchCase="'proof'">
        <ion-item *ngFor="let proof of group.proof" text-wrap>
          <ion-row>
            <b>{{proof.subjects}}</b>
          </ion-row>
          <br/>
          <ion-row>
            <ion-col col-8>
              <p>Data: {{proof.dateProof | date:'dd-MM-yyyy'}}</p>
            </ion-col>
            <ion-col col-4>
              <p>Valor: {{proof.value}}</p>
            </ion-col>
          </ion-row>
        </ion-item>
      </ion-list>

      <ion-list *ngSwitchCase="'students'">
        <ion-item text-wrap *ngFor="let student of group.students" (click)="selectStudent(student)">
          <ion-avatar item-start>
            <img *ngIf="student.user.avatar" [src]="student.user.avatar">
            <img *ngIf="!student.user.avatar" src="assets/imgs/no_user.png">
          </ion-avatar>
          <h2>{{student.name}} - <i>@{{student.user.username}}</i></h2>
          <p>{{student.user.email}}</p>
        </ion-item>
      </ion-list>

    </div>

    <ion-fab right bottom *ngIf="isOwner">
      <button ion-fab color="light"> <ion-icon name="attach"></ion-icon></button>
      <ion-fab-list side="top">
        <ion-label class="novoGrupo">Remover</ion-label>
        <button class="mycss" ion-fab (click)="removeGroup()">
          <ion-icon name="book"></ion-icon>
        </button>
        <ion-label class="config" >Editar</ion-label>
        <button ion-fab (click)="enableEditGroup()">
          <ion-icon name="options"></ion-icon>
        </button>
      </ion-fab-list>   
    </ion-fab>


<!--
  <ion-grid>
    <ion-list-header class="headerList">
      Horário das Aulas
    </ion-list-header>
    <ion-list>
      <ion-item *ngFor="let classSchedule of group.classSchedule" >
        <ion-row>
          <ion-col col-4>
            <p>{{classSchedule.dayOfWeek}}</p>
          </ion-col>
          <ion-col col-8>
            <p>Inicia ás: {{classSchedule.startTime}}</p>
            <p>Termina ás: {{classSchedule.endTime}}</p>
          </ion-col>
        </ion-row>
      </ion-item>
    </ion-list>
  </ion-grid>

  <ion-grid>
      <ion-list-header class="headerList">
        Atividades programadas
      </ion-list-header>
      <ion-list>
          <ion-item *ngFor="let scheduledActivity of group.scheduledActivity" text-wrap>
            <ion-row>
              <b>{{scheduledActivity.description}}</b>
            </ion-row>
            <br/>
            <ion-row>
              <ion-col>
                <p>Data de envio: {{scheduledActivity.sendDate | date:'dd-MM-yyyy'}}</p>
              </ion-col>
            </ion-row> 
            <ion-row>
              <ion-col>
                  <p>Data de entrega: {{scheduledActivity.deliveryDate | date:'dd-MM-yyyy'}}</p>
              </ion-col>
            </ion-row>
          </ion-item>
        </ion-list>
    </ion-grid>

  <ion-grid>
    <ion-list-header class="headerList">
      Provas
    </ion-list-header>
    <ion-list>
      <ion-item *ngFor="let proof of group.proof" text-wrap>
        <ion-row>
          <b>{{proof.subjects}}</b>
        </ion-row>
        <br/>
        <ion-row>
          <ion-col col-8>
            <p>Data: {{proof.dateProof | date:'dd-MM-yyyy'}}</p>
          </ion-col>
          <ion-col col-4>
            <p>Valor: {{proof.value}}</p>
          </ion-col>
        </ion-row>
      </ion-item>
    </ion-list>
  </ion-grid>

  <ion-grid>
    <ion-list-header class="headerList">
     Alunos
    </ion-list-header>
    <ion-list>
      <ion-item text-wrap *ngFor="let student of group.students" (click)="selectStudent(student)">
        <ion-avatar item-start>
          <img [src]="student.user.avatar ? student.user.avatar : null">
        </ion-avatar>
        <h2>{{student.name}} - <i>@{{student.user.username}}</i></h2>
        <p>{{student.user.email}}</p>
      </ion-item>
    </ion-list>
  </ion-grid>
-->
</ion-content>